% Load essential packages early
\RequirePackage{mathtools}

% Avoid microtype issues by disabling problematic features
\PassOptionsToPackage{protrusion=false, expansion=false}{microtype}

% Essential packages for graphics, tables, and code
\usepackage{graphicx}    % For including images
\usepackage{booktabs}    % For professional-looking tables
\usepackage{caption}     % For better figure and table captions
\usepackage{listings}    % For code formatting

% Hyperlinks setup - load last
\usepackage{hyperref}
\hypersetup{
    colorlinks=true,
    linkcolor=blue,
    citecolor=blue,
    urlcolor=blue,
    pdfborder={0 0 0},    % Removes boxes around links for a cleaner look
    bookmarksopen=true,   % Opens bookmarks by default
    bookmarksdepth=2      % Controls depth of bookmarks
}

% Listings configuration for code chunks
\lstset{
    basicstyle=\ttfamily\small, % Small font for better readability in code blocks
    columns=flexible,           % Adjust column spacing automatically
    breaklines=true,            % Allow line breaks in code
    showspaces=false,           % Hide spaces for cleaner appearance
    showstringspaces=false,     % Hide spaces within strings
    keepspaces=true,            % Keeps whitespace for code alignment
    frame=single,               % Adds a simple frame around code blocks
    rulecolor=\color{gray},     % Frame color for consistency
    xleftmargin=1em,            % Adds padding to the left for better readability
    xrightmargin=1em,           % Adds padding to the right
    backgroundcolor=\color[gray]{0.95}, % Subtle background for code blocks
    numbers=left,               % Line numbers on the left
    numberstyle=\tiny\color{gray}, % Styling for line numbers
    lineskip=-1pt               % Reduce line spacing within code blocks
}
