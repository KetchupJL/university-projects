"0","# Maps for each year"
"0",""
"0","# Predicting TB rates"
"0","TBdata$predicted_cases_sp <- predict(gam_model_SP, type = ""response"")"
"0",""
"0","# Convert to TB rate per 100,000 population"
"0","TBdata$predicted_rate_sp <- (TBdata$predicted_cases_sp / TBdata$Population) * 100000"
"0",""
"0","par(mfrow = c(3, 1))  # Arrange plots side by side for comparison"
"0",""
"0","years <- c(""2012"", ""2013"", ""2014"")"
"0",""
"0","# Define common quantiles for all years to keep the scale consistent"
"0","quantiles <- quantile(TBdata$predicted_rate_sp, probs = seq(0, 1, length.out = 8), na.rm = TRUE)"
"0",""
"0","# Loop through each year and plot it clearly"
"0","for (year in years) {"
"0","  "
"0","  plot.map("
"0","    x = TBdata$predicted_rate_sp[TBdata$Year == year],  # Filter TB rates for the year"
"0","    Q = quantiles,"
"0","    main = paste(""Predicted TB Risk (per 100,000) - Year"", year),"
"0","    cex = 1, "
"0","    decimals = 2,"
"0","    palette = my_palette  # Uses the same colour scheme for all years"
"0","  )"
"0","}"
